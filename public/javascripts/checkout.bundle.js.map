{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./checkout.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA,4BAA4B,yBAAyB,gCAAgC,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,iCAAiC,GAAG;AACjK;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf,OAAO;AACP;AACA;AACA;AACA;AACA,wBAAwB,yBAAyB;AACjD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH","file":"checkout.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/javascripts/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./checkout.js\");\n","checkEmail = function() {\r\n  var email = $(\"#email\").val();\r\n\r\n  $(\"#emailGroup\").removeClass(\"has-error\");\r\n  $(\"#helpEmail\").html('');\r\n  if(!validateEmail(email)) {\r\n    $(\"#emailGroup\").addClass(\"has-error\");\r\n    $(\"#helpEmail\").html('Email inválido.');\r\n    return;\r\n  }\r\n\r\n  $.ajax({\r\n    method: \"POST\",\r\n    url: \"/conta/checkemail\",\r\n    data: { email: email }\r\n  })\r\n  .done(function( result ) {\r\n    if( result.status === 'SUCCESS' ) {\r\n      $(\"#loginSenha\").fadeIn(300);\r\n      $(\"#loginOpcoes\").fadeIn(300);\r\n      $(\"#btnEmail\").fadeOut(300);\r\n      $(\"#labelEmail\").html(\"Email\");\r\n    } else {\r\n      $(\"#emailcadastro\").val(email);\r\n      $(\"#emailForm\").slideUp();\r\n      $(\"#checkoutForm\").slideDown();\r\n    }\r\n  })\r\n  .fail(function(data,status,error) {\r\n    $(\"#emailcadastro\").val(email);\r\n    $(\"#emailForm\").slideUp();\r\n    $(\"#checkoutForm\").slideDown();\r\n  });\r\n\r\n};\r\n\r\nvalidateEmail = function(email) {\r\n  var g = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n  return g.test(email);\r\n};\r\n\r\nmostraCadastro = function() {\r\n  var email = $(\"#email\").val();\r\n  $(\"#emailcadastro\").val(email);\r\n  $(\"#emailForm\").slideUp();\r\n  $(\"#checkoutForm\").slideDown();\r\n};\r\n\r\nmostraLogin = function() {\r\n  var email = $(\"#emailcadastro\").val();\r\n  $(\"#email\").val(email);\r\n  $(\"#emailForm\").slideDown();\r\n  $(\"#checkoutForm\").slideUp();\r\n  $(\"#loginSenha\").fadeIn(300);\r\n  $(\"#loginOpcoes\").fadeIn(300);\r\n  $(\"#btnEmail\").fadeOut(300);\r\n  $(\"#labelEmail\").html(\"Email\");\r\n}\r\n\r\nlogin = function() {\r\n  // TODO\r\n}\r\n\r\n\r\nbuscaCep = function() {\r\n  // TODO Implementar calculo de frete.\r\n  // npm install -save frete\r\n  // https://www.npmjs.com/package/frete\r\n\r\n\r\n  var f = $(\"#cep\").val();\r\n  var j = \"\";\r\n  for (var e = 0; e < f.length; ++e) {\r\n    var c = f.charAt(e);\r\n    if (((c < \"0\") || (c > \"9\")) && c !== \"\") {\r\n      var a = false\r\n    } else {\r\n      j = j + c\r\n    }\r\n  }\r\n\r\n  if (j.length < 8) {\r\n    return;\r\n  }\r\n\r\n  //var cep = $(\"#cep\").val();\r\n\r\n  // $(\"#cepGroup\").removeClass(\"has-error\");\r\n  // if(cep.length < 8) {\r\n  //   $(\"#cepGroup\").addClass('has-error');\r\n  //   return;\r\n  // }\r\n\r\n  $(\"#logradouro\").val(\"\").removeAttr(\"readonly\");\r\n  $(\"#bairro\").val(\"\").removeAttr(\"readonly\");\r\n  $(\"#cidade\").val(\"\").removeAttr(\"readonly\");\r\n  $(\"#estado\").val(\"\").removeAttr(\"readonly\");\r\n  $(\"#numero\").val(\"\");\r\n  $(\"#complemento\").val(\"\");\r\n\r\n  // $(\"#btnBuscaCep\").html('<i class=\"fa fa-refresh fa-spin\"></i>');\r\n  // $(\"#btnBuscaCep\").attr(\"disabled\", \"disabled\");\r\n  $(\"#cepProgress\").html('<i class=\"fa fa-refresh fa-spin fa-2x\"></i>');\r\n\r\n\r\n  $.ajax({\r\n    method: \"GET\",\r\n    url: \"http://api.postmon.com.br/v1/cep/\" + j //cep\r\n  })\r\n  .done(function( result ) {\r\n    if(result.statusText) {\r\n      if(result.status == 404) {\r\n        $(\"#cepHelperText\").html(\"CEP não localizado\");\r\n        //$(\"#cepGroup\").addClass('has-error');\r\n      }\r\n    } else {\r\n      $(\"#logradouro\").val(result.logradouro).attr(\"readonly\", \"readonly\");\r\n      $(\"#bairro\").val(result.bairro).attr(\"readonly\", \"readonly\");\r\n      $(\"#cidade\").val(result.cidade).attr(\"readonly\", \"readonly\");\r\n      $(\"#estado\").val(result.estado).attr(\"readonly\", \"readonly\");\r\n\r\n      $.ajax({\r\n        method: \"POST\",\r\n        url: \"/checkout/frete\",\r\n        data: { cep: j }\r\n      })\r\n      .done(function( result ) {\r\n        if( result.status === 'SUCCESS' ) {\r\n          // TODO Montar template com opções de envio\r\n          var h = \"\";\r\n          for(var i = 0; i < result.dados.length; i++) {\r\n            h += \"<p>\" + result.dados[i].name + \": \" + result.dados[i].prazoEntrega + \" dia(s), R$\" + result.dados[i].valor + \"</p>\";\r\n          }\r\n          $(\"#frete\").html(h);\r\n        } else {\r\n          // TODO Melhorar mensagem de erro\r\n          $(\"#frete\").html(\"Erro\");\r\n        }\r\n      })\r\n      .fail(function(data, status, error) {\r\n        // TODO Melhorar mensagem de erro\r\n        $(\"#frete\").html(\"Erro\");\r\n      });\r\n\r\n    }\r\n    // $(\"#btnBuscaCep\").html('Buscar');\r\n    // $(\"#btnBuscaCep\").removeAttr(\"disabled\");\r\n    $(\"#cepProgress\").html('');\r\n  })\r\n  .fail(function(data, status, error) {\r\n    if(data.status == 404) {\r\n      $(\"#cepHelperText\").html(\"CEP não localizado\");\r\n      //$(\"#cepGroup\").addClass('has-error');\r\n    } else {\r\n      $(\"#cepHelperText\").html(\"Falha ao localizar CEP\");\r\n      //$(\"#cepGroup\").addClass('has-error');\r\n    }\r\n    // $(\"#btnBuscaCep\").html('Buscar');\r\n    // $(\"#btnBuscaCep\").removeAttr(\"disabled\");\r\n    $(\"#cepProgress\").html('');\r\n  });\r\n\r\n}\r\n"],"sourceRoot":""}